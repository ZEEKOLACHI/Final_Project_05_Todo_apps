<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Expense Tracker</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{--bg:#FAFAFA;--card:#fff;--border:#E5E7EB;--accent:#2563EB;--text:#111827;--muted:#6B7280;--danger:#EF4444;--success:#10B981}
body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);min-height:100vh}
.card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:24px}
select,input{background:var(--card);border:1px solid var(--border);border-radius:10px;padding:8px 12px;font-size:14px;color:var(--text);outline:none}
select:focus,input:focus{border-color:var(--accent)}
.cat-dot{width:10px;height:10px;border-radius:50%;display:inline-block}
</style>
</head>
<body>
<div class="max-w-4xl mx-auto px-4 py-8">
  <header class="text-center mb-8">
    <div class="inline-block px-3 py-1 rounded-full text-xs font-medium mb-2" style="background:#DBEAFE;color:var(--accent);">SKILL 3</div>
    <h1 class="text-3xl font-bold" style="color:var(--accent);">ğŸ’° Expense Tracker</h1>
    <p class="text-sm mt-1" style="color:var(--muted);">Track spending Â· Set budgets Â· Stay in control</p>
  </header>

  <!-- Summary Cards -->
  <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-6">
    <div class="card text-center"><div class="text-2xl font-bold" style="color:var(--accent)" id="totalSpent">Rs 0</div><div class="text-xs" style="color:var(--muted)">Total Spent</div></div>
    <div class="card text-center"><div class="text-2xl font-bold" style="color:var(--success)" id="budget">Rs 50,000</div><div class="text-xs" style="color:var(--muted)">Budget</div></div>
    <div class="card text-center"><div class="text-2xl font-bold" id="remaining">Rs 50,000</div><div class="text-xs" style="color:var(--muted)">Remaining</div></div>
    <div class="card text-center"><div class="text-2xl font-bold" style="color:var(--muted)" id="txCount">0</div><div class="text-xs" style="color:var(--muted)">Transactions</div></div>
  </div>

  <div class="grid md:grid-cols-5 gap-6 mb-6">
    <!-- Add Form -->
    <div class="md:col-span-2 card">
      <h3 class="font-bold mb-4">â• Add Expense</h3>
      <div class="space-y-3">
        <input type="text" id="desc" placeholder="Description" class="w-full">
        <input type="number" id="amount" placeholder="Amount (Rs)" class="w-full">
        <select id="category" class="w-full">
          <option value="Food">ğŸ” Food</option>
          <option value="Transport">ğŸš— Transport</option>
          <option value="Shopping">ğŸ›ï¸ Shopping</option>
          <option value="Bills">ğŸ“± Bills</option>
          <option value="Health">ğŸ¥ Health</option>
          <option value="Education">ğŸ“š Education</option>
          <option value="Entertainment">ğŸ¬ Entertainment</option>
          <option value="Other">ğŸ“¦ Other</option>
        </select>
        <input type="date" id="date" class="w-full">
        <button onclick="addExpense()" class="w-full py-2 rounded-xl font-bold text-white text-sm" style="background:var(--accent)">Add Expense</button>
      </div>
    </div>

    <!-- Chart -->
    <div class="md:col-span-3 card">
      <h3 class="font-bold mb-4">ğŸ“Š Spending by Category</h3>
      <canvas id="pieChart" height="220"></canvas>
    </div>
  </div>

  <!-- Expense List -->
  <div class="card">
    <div class="flex justify-between items-center mb-4">
      <h3 class="font-bold">ğŸ“‹ Recent Expenses</h3>
      <button onclick="exportCSV()" class="text-xs px-3 py-1 rounded-lg font-medium" style="background:#DBEAFE;color:var(--accent)">ğŸ“¥ Export CSV</button>
    </div>
    <div id="expenseList" class="space-y-2"></div>
    <div id="emptyState" class="text-center py-8 text-sm" style="color:var(--muted)">No expenses yet. Add your first one above!</div>
  </div>
</div>

<script>
const COLORS={Food:'#EF4444',Transport:'#F59E0B',Shopping:'#8B5CF6',Bills:'#3B82F6',Health:'#10B981',Education:'#06B6D4',Entertainment:'#EC4899',Other:'#6B7280'};
const BUDGET=50000;
let expenses=JSON.parse(localStorage.getItem('expenses')||'[]');
let chart;

document.getElementById('date').valueAsDate=new Date();

function addExpense(){
  const desc=document.getElementById('desc').value.trim();
  const amount=parseFloat(document.getElementById('amount').value);
  const category=document.getElementById('category').value;
  const date=document.getElementById('date').value;
  if(!desc||!amount||amount<=0){alert('Please fill description and valid amount');return;}
  expenses.unshift({id:Date.now(),desc,amount,category,date});
  localStorage.setItem('expenses',JSON.stringify(expenses));
  document.getElementById('desc').value='';document.getElementById('amount').value='';
  render();
}

function deleteExpense(id){
  expenses=expenses.filter(e=>e.id!==id);
  localStorage.setItem('expenses',JSON.stringify(expenses));
  render();
}

function render(){
  const total=expenses.reduce((s,e)=>s+e.amount,0);
  const rem=BUDGET-total;
  document.getElementById('totalSpent').textContent=`Rs ${total.toLocaleString()}`;
  document.getElementById('remaining').textContent=`Rs ${rem.toLocaleString()}`;
  document.getElementById('remaining').style.color=rem<0?'var(--danger)':'var(--text)';
  document.getElementById('txCount').textContent=expenses.length;

  // List
  const list=document.getElementById('expenseList');
  document.getElementById('emptyState').style.display=expenses.length?'none':'block';
  list.innerHTML=expenses.slice(0,15).map(e=>`
    <div class="flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 transition">
      <span class="cat-dot" style="background:${COLORS[e.category]}"></span>
      <span class="flex-1 text-sm font-medium">${e.desc}</span>
      <span class="text-xs px-2 py-1 rounded-full" style="background:${COLORS[e.category]}15;color:${COLORS[e.category]}">${e.category}</span>
      <span class="text-sm font-bold">Rs ${e.amount.toLocaleString()}</span>
      <span class="text-xs" style="color:var(--muted)">${e.date}</span>
      <button onclick="deleteExpense(${e.id})" class="text-xs px-2 py-1 rounded hover:bg-red-50" style="color:var(--danger)">âœ•</button>
    </div>
  `).join('');

  // Chart
  const catTotals={};
  expenses.forEach(e=>{catTotals[e.category]=(catTotals[e.category]||0)+e.amount;});
  const labels=Object.keys(catTotals);
  const data=Object.values(catTotals);
  const colors=labels.map(l=>COLORS[l]);

  if(chart)chart.destroy();
  if(labels.length>0){
    chart=new Chart(document.getElementById('pieChart'),{
      type:'doughnut',
      data:{labels,datasets:[{data,backgroundColor:colors,borderWidth:0}]},
      options:{responsive:true,plugins:{legend:{position:'right',labels:{boxWidth:12,padding:12,font:{size:12}}}}}
    });
  }
}

function exportCSV(){
  if(!expenses.length){alert('No data to export');return;}
  let csv='Date,Description,Category,Amount\n';
  expenses.forEach(e=>{csv+=`${e.date},"${e.desc}",${e.category},${e.amount}\n`;});
  const blob=new Blob([csv],{type:'text/csv'});
  const a=document.createElement('a');a.href=URL.createObjectURL(blob);
  a.download='expenses.csv';a.click();
}

render();
</script>
</body>
</html>
